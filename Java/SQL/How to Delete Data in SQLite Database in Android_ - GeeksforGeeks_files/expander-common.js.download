var isIE=(window.ActiveXObject||"ActiveXObject" in window);var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var thisBody=document.body||document.documentElement;var thisStyle=thisBody.style;var supportTransition=thisBody.style.transition!==undefined||thisStyle.WebkitTransition!==undefined||thisStyle.MozTransition!==undefined||thisStyle.MsTransition!==undefined||thisStyle.OTransition!==undefined;if(isIE){var ie=(function(){var undef,v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while(div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->',all[0]);return v>4?v:undef}());var wrongIE=ie<10;var ie8=ie<9}(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame']}
if(!window.requestAnimationFrame)
window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)
window.cancelAnimationFrame=function(id){clearTimeout(id)}}());var o,e={},priceAuto,autoExpandAnim,autoExpandAnimOut,expandTimeout,closeTimeout,mobileTimeout,nextOffer=0,choosenOffer=0,currentScreen=0,oldScreenY=0,currentScreenOffers=[],expandedOffer=0,btnXtimeout,priceAlpha=1,step,startX,oldPosition=null,currentPosition=0,arrowTimeout,notActiveOnEnd,planche={enabled:!1},customClickTracking={enabled:!1,offerTrackingLimit:-1,globalTrackingLimit:-1,globalTrackingCounter:0},banner={flags:{mouseOnBanner:!1,theEnd:!1,plancheShown:!1},options:{offersCount:null,infiniteAnimAllowed:!0,offerRibbonAlways:!1,offerPriceEnabled:!0,logoAnimInterval:3000,logoAnimFadeSpeed:1000,maxAnimTime:22000,enlargerAnimEnabled:!1,hoverAnimInterval:4400,planche:!1,fashionslider:'false',followmouse:'false',logoGIFanimation:'false'},elements:{},init:function(options){banner.options=$.extend(banner.options,options);o=banner.options;o.enlargerAnimEnabled=!0;o.maxPosition=o.offersCount-o.offersOnScreen;o.fashionslider=o.fashionslider.toLowerCase()==='true';o.followmouse=o.followmouse.toLowerCase()==='true'&&!isMobile;o.logoGIFanimation=o.logoGIFanimation.toLowerCase()==='true';o.moveDown=o.imageMoveDirection.toLowerCase()==='down';o.arrowClickEvent=isMobile?'roll':o.arrowClickEvent;banner.cacheElem();banner.initStandardOpt();if(isMobile){$('#navs').attr('href','#').attr('target','_self');for(var i=0;i<e.offer.length;i++){$(e.offer[i]).attr('href','#').attr('target','_self')}
$('*').off('mouseenter');e.offer.css('border',e.offer.css('border'))}
e.banner.css('display','block');if(!startAfterLoad)fadeInElement($('body'),500);banner.offerHeight=$(e.imgs[0]).height();if(o.followmouse){var mouseMargin=16;var yMarg=e.offer.offset().top+mouseMargin;var mouseMultiplier=banner.offerHeight/(banner.offerHeight-mouseMargin*2);e.banner.on('mousemove',function(event){banner.mY=event.pageY*mouseMultiplier-yMarg})}
this.addPriceAnimation();e.eClose.css('opacity','0');e.eClose.css('display','none');banner.txtContainer=[];banner.txtField=[];for(var i=0;i<o.offersCount;i++){banner.txtContainer[i]=$($('.offer-enlarger-name')[i]);banner.txtField[i]=$($('.offer-enlarger-name-value')[i])}
banner.changePosition(0)},restartAnim:function(id,t,dont){id=id||nextOffer;t=t||3000;banner.clearNavigationTimeouts();clearTimeout(mobileTimeout);mobileTimeout=setTimeout(function(){if(banner.flags.theEnd)return;banner.flags.mouseOnBanner=!1;if(!dont)nextOffer=id===o.offersCount-1?0:id+1;banner.closeAll();banner.expandAnim.start(1500)},t)},clearNavigationTimeouts:function(){clearTimeout(expandTimeout);clearTimeout(closeTimeout)},bindUIActions:function(){e.offer.on('mouseenter'+(isMobile?', mousedown':''),function(ev){banner.flags.mouseOnBanner=!0;var id=$(this).data('id');if(isMobile){banner.restartAnim(id,30000);banner.flags.clickedOffer=id;banner.flags.mobileClicked=!0}
banner.expandAnim.stop();if(banner.isOfferOpened(id)){banner.clearNavigationTimeouts();return}
if(expandedOffer!=id&&banner.isOfferOpened(expandedOffer))banner.expandAnim.closeOffer(expandedOffer);banner.expandAnim.bleachOffers(id);banner.clearNavigationTimeouts();banner.expandAnim.bleachOffers(id);expandTimeout=setTimeout(function(){banner.expandAnim.expandOffer(id)},isMobile?0:500)});e.offer.on('mouseleave',function(ev){var id=$(this).data('id');banner.clearNavigationTimeouts();closeTimeout=setTimeout(function(){banner.expandAnim.bleachOffers(-1);if(banner.isOfferOpened(id))banner.expandAnim.closeOffer(id);nextOffer=id===o.offersCount-1?0:id+1},200)});e.banner.on('mouseleave',function(ev){if(planche.enabled&&planche.vid)return;banner.flags.mouseOnBanner=!1;if(!banner.flags.theEnd||o.animAgain.toLowerCase()=='true')banner.expandAnim.start(2500)});if(isMobile){e.eClose.on('click',function(){banner.closeAll();if(banner.flags.mobileClicked){banner.flags.mobileClicked=!1;banner.restartAnim(banner.flags.clickedOffer,2000)}})}},isOfferOpened:function(nr){return e.offer[nr].state==='opening'||e.offer[nr].state==='opened'},addPriceAnimation:function(){var temp=[],that=this;$.each(offers,function(i,el){if(offers[i].oldPrice){el.priceAlpha=1;el.priceAnim=function(){if(!(banner.flags.theEnd&&!banner.flags.mouseOnBanner)){el.priceAlpha=1-el.priceAlpha;$('#price'+i).anim({opacity:el.priceAlpha},{duration:50,queue:!1});$('#oldprice'+i).anim({opacity:1-el.priceAlpha},{duration:50,queue:!1})}else{$('#price'+i).anim({opacity:1},{duration:0,queue:!1});$('#oldprice'+i).anim({opacity:0},{duration:0,queue:!1})}
setTimeout(el.priceAnim,750)}
el.priceAnim()}})},initStandardOpt:function(){e.logoContainer.first().css('display','inline-block');if(e.logoContainer.length>1&&!o.logoGIFanimation)
this.logoAnim.start(e.logoContainer);if(!o.infiniteAnimAllowed){setTimeout(function(){banner.logoAnim.stop(e.logoContainer);if(banner.isOfferOpened(expandedOffer))banner.expandAnim.closeOffer(expandedOffer);banner.expandAnim.stop();if(planche.enabled||planche.vid){planche.plancheAnim.hide();planche.enabled=planche.flags.active=!1
clearTimeout(planche.autoShowTimeout)}
banner.flags.theEnd=!0},o.maxAnimTime)}
$.fn.anim=$.fn.velocity;e.info.css('bottom','-30px');e.info.css('opacity','0');banner.bindUIActions();startX=2;step=o.offersContainerWidth*o.multiplier/o.offersCount;e.container.css('left',startX);notActiveOnEnd=o.arrowNotActiveOnEnd.toLowerCase()==='true';if(o.fashionslider){for(var i=0;i<e.imgs.length;i++){$(e.imgs[i]).css('width','100%').css('height','100%').css('left','0')}}
banner.expandAnim.start(1500)},cacheElem:function(){this.elements={banner:$('#banner-container'),logoContainer:$('#logo-container .logo-box'),offer:$('.offer-container'),offerHover:$('.offer-hover-container'),offerBtn:$('.offer-button-wrapper'),offerName:$('.offer-name-container'),eClose:$('#offer-enlarger-close'),ePrice:$('.offer-enlarger-price'),ePriceValue:$('.offer-enlarger-price-value'),eName:$('.offer-enlarger-name-value'),info:$('.offer-enlarger-infobar'),container:$('#alloffers-container-relative'),arrows:[$('.nav.left'),$('.nav.right')],imgs:$('.offer-img-container'),region:$('.offer-region-position'),stars:$('.offer-stars-position'),};e=$.extend(e,this.elements);for(var i=0;i<e.offer.length;i++){e.offer[i].state='closed'}
e.arrowColor=$("#navs .nav").css("background-color")},logoAnim:{idx:0,timeout:null,start:function($el){if(!logoReady){setTimeout(function(){banner.logoAnim.start($el)},250)
return}
$($el[banner.logoAnim.idx]).fadeIn(o.logoAnimFadeSpeed,function(){banner.logoAnim.idx=(banner.logoAnim.idx<$el.length-1)?(banner.logoAnim.idx+1):0;banner.logoAnim.timeout=setTimeout(function(){$el.fadeOut(o.logoAnimFadeSpeed);banner.logoAnim.start($el)},o.logoAnimInterval)})},stop:function($el){if(!o.logoGIFanimation){$el.clearQueue().stop(!0,!0).not($($el[0])).fadeOut();$el.first().fadeIn(o.logoAnimFadeSpeed);clearTimeout(banner.logoAnim.timeout)}else if($el.length===2){($($el[0])).fadeOut();($($el[1])).fadeIn()}}},expandAnim:{start:function(tmp){if(banner.flags.mouseOnBanner)return;clearTimeout(autoExpandAnim);autoExpandAnim=setTimeout(function(){if(banner.flags.theEnd)return;if(planche.enabled&&!banner.flags.plancheShown){clearTimeout(planche.showTimeout);banner.flags.plancheShown=!0;planche.makeShow(showOffer)}else{showOffer()}},tmp||o.hoverAnimInterval);function showOffer(){banner.expandAnim.expandOffer(nextOffer);expandedOffer=nextOffer;clearTimeout(autoExpandAnimOut);autoExpandAnimOut=setTimeout(function(){banner.expandAnim.closeOffer(nextOffer);nextOffer=nextOffer===o.offersCount-1?0:nextOffer+1},o.hoverAnimInterval*.640)
banner.expandAnim.start()}},stop:function(){clearTimeout(autoExpandAnim);clearTimeout(autoExpandAnimOut)},expandOffer:function(nr){banner.closeAll();banner.changePosition(nr,o.zoom>1?500:300);banner.showInfo(nr,!0);var thisOffer=$(e.offer[nr]);for(var i=0;i<o.offersCount;i++){$(e.offer[i]).css('z-index',i==nr?100:3)}
e.offer[nr].state='opening';e.offerBtn.css('pointer-events','none');clearTimeout(e.offer[nr].timeout);e.offer[nr].timeout=setTimeout(function(){if(e.offer[nr].state==='opening'){e.offer[nr].state='opened';if(isMobile)$(e.offer[nr]).attr('href',offers[nr].url).attr('target','_blank');if(o.followmouse)thisOffer.css('cursor','ns-resize');e.offerBtn.css('pointer-events','auto')}},500);thisOffer.anim({width:o.offersContainerWidth*o.percent-2,left:step*currentPosition},{duration:500,queue:!1,easing:'easeOutCirc'});clearTimeout(btnXtimeout);e.eClose.css('display','block');e.eClose.anim({left:o.bannerWidth+step*currentPosition-o.margin-27},{duration:0,queue:!1});e.eClose.anim({opacity:.75},{duration:640,queue:!1});if(o.zoom>1){var finalY=-(banner.offerHeight*(o.zoom-1));var startY=o.moveDown?finalY:0;var endY=o.moveDown?0:finalY;var yMultiplier=o.zoom-1;var yCorrection=banner.offerHeight*yMultiplier;img=$(e.imgs[nr]);if(supportTransition){img.anim({height:o.zoom*100+'%',translateY:startY},{duration:500,queue:!1,easing:'easeInOutCubic'})}else{img.anim({height:o.zoom*100+'%',top:startY},{duration:500,queue:!1,easing:'easeInOutCubic'})}
clearTimeout(e.offer[nr].photoTimeout);e.offer[nr].photoTimeout=setTimeout(movePhoto,500)}
function movePhoto(){if(o.followmouse)imgFollowMouse();img.anim(supportTransition?{translateY:endY}:{top:endY},{duration:o.hoverAnimInterval*.640-.500,queue:!1});function imgFollowMouse(){if(!banner.isOfferOpened(nr))return;requestAnimationFrame(imgFollowMouse);if(banner.flags.mouseOnBanner){var newY=finalY-banner.mY*yMultiplier+yCorrection;var currentY=img.position().top-2;var imgY=currentY+(newY-currentY)/20;img.anim('stop');img.anim(supportTransition?{translateY:imgY}:{top:imgY},{duration:0,queue:!1})}}}},closeOffer:function(nr){banner.flags.plancheShown=!1;banner.showInfo(nr,!1);var thisOffer=$(e.offer[nr]);e.offer[nr].state='closing';clearTimeout(e.offer[nr].timeout);e.offer[nr].timeout=setTimeout(function(){e.offer[nr].state='closed';if(isMobile){$(e.offer[nr]).attr('href','#').attr('target','_self');banner.expandAnim.bleachOffers(-1)}},500)
thisOffer.anim({width:offers[nr].offerWidth,left:offers[nr].offerX},{duration:500,queue:!1,easing:'easeInOutCirc'});e.eClose.anim({opacity:0},{duration:500,queue:!1});clearTimeout(btnXtimeout);btnXtimeout=setTimeout(function(){e.eClose.css('display','none')},500);if(o.followmouse)thisOffer.css('cursor','pointer');if(o.zoom>1){clearTimeout(e.offer[nr].photoTimeout);var img=$(e.imgs[nr]);img.anim("stop");if(o.fashionslider){img.anim({width:'100%',height:'100%',left:0},{duration:640,queue:!1})}else{img.anim({height:'100%'},{duration:640,queue:!1})}
img.anim(supportTransition?{translateY:0}:{top:0},{duration:640,queue:!1,easing:'easeInOutCubic'})}},bleachOffers:function(nr){for(var i=0;i<o.offersCount;i++){var img=$(e.imgs[i]);img.anim({opacity:nr===-1?1:i===nr?1:.5},{duration:200,queue:!1})}}},closeAll:function(){for(i=0;i<o.offersCount;i++){if(banner.isOfferOpened(i)){banner.expandAnim.closeOffer(i)}}},changePosition:function(nr,tim){tim=tim||500;currentPosition=nr>o.maxPosition?o.maxPosition:nr;if(oldPosition===currentPosition)return;var currentX=startX-step*currentPosition;e.container.anim({left:currentX},{duration:tim,queue:!1,easing:'easeInOutCirc'});banner.isArrowActive(nr);oldPosition=currentPosition},arrow:function(dir,event){banner.closeAll();clearTimeout(arrowTimeout);arrowTimeout=setTimeout(function(){event=event||'over';if(event=='out'){if(!banner.flags.theEnd)banner.expandAnim.start(2500);return}
var nr=currentPosition+dir;nr=nr>o.maxPosition?notActiveOnEnd?o.maxPosition:0:nr<0?notActiveOnEnd?0:o.maxPosition:nr;banner.expandAnim.stop();nextOffer=nr;banner.changePosition(nr,333);if(event!='click')banner.arrow(dir);if(isMobile)banner.restartAnim(nextOffer,2000,!0)},500*Number(event!='click'))},isArrowActive:function(nr){if(!notActiveOnEnd)return;for(var i=0;i<2;i++){var deactivate=(i==0&&nr==0)||(i==1&&nr>=o.maxPosition);e.arrows[i].anim({opacity:1-Number(deactivate)*.640},{duration:333});if(deactivate){if(o.arrowClickEvent==='link'){e.arrows[i].css('pointer-events','none')}else{e.arrows[i].css('background',e.arrowColor)}}else{if(o.arrowClickEvent==='link'){e.arrows[i].css('pointer-events','')}else{e.arrows[i].css('background','')}}}},showInfo:function(nr,ok){if(ok){offers[nr].infoTimeout=setTimeout(function(){if(e.info[nr].state==='opened')return;$(e.info[nr]).css('bottom','-30px');$(e.info[nr]).anim({bottom:0,opacity:1},{duration:333,easing:'easeInOutCirc',queue:!1});e.info[nr].state='opened';if(e.region.length>0){var reg=$('#region'+nr);reg.css('display','block').css('bottom','0px').css('opacity','0')
reg.anim({bottom:45,opacity:1},{duration:333,easing:'easeInOutCirc',queue:!1})}
if(e.stars.length>0){var stars=$('#stars'+nr);stars.css('display','block').css('bottom','0px').css('opacity','0')
stars.anim({bottom:45,opacity:1},{duration:333,delay:66,easing:'easeInOutCirc',queue:!1})}
if(o.rollText){var wrap=!1;if(o.rollTextOptions)var wrap=o.rollTextOptions.horizontal!=!0&&o.rollTextOptions.horizontal!=undefined;if(!wrap)e.eName.css('white-space','nowrap').css('width','auto')
clearTimeout(offers[nr].stopRollTimeout);offers[nr].rollTimeout=setTimeout(function(){tools.rollTextField({container:banner.txtContainer[nr],txt:banner.txtField[nr]},o.rollTextOptions?o.rollTextOptions:{horizontal:!0,infinite:!0,noBreak:!1,stopOnEnd:!1})},650)}},333)}else{clearTimeout(offers[nr].infoTimeout);$(e.info[nr]).anim({opacity:0},{duration:500,queue:!1});e.info[nr].state='closed';if(e.region.length>0){var reg=$('#region'+nr);reg.anim({opacity:0},{duration:300,queue:!1,complete:function(){reg.css('display','none')}})}
if(e.stars.length>0){var stars=$('#stars'+nr);stars.anim({opacity:0},{duration:500,queue:!1,complete:function(){stars.css('display','none')}})}
if(o.rollText){clearTimeout(offers[nr].rollTimeout);offers[nr].stopRollTimeout=setTimeout(tools.stopRollAllTexts,300)}}},customClickTracking:function(){var _=this;$('.custom-tracking-link').on('click',function(e){if($(e.currentTarget).hasClass('offer-enlarger-link')){if((offers[banner.flags.currentOffer].trackingClickCount<Number(customClickTracking.offerTrackingLimit)||customClickTracking.offerTrackingLimit==-1)&&(customClickTracking.globalTrackingCounter<Number(customClickTracking.globalTrackingLimit)||customClickTracking.globalTrackingLimit==-1)){_.countAndTrack(banner.flags.currentOffer,e.currentTarget.dataset.trackingurl)}}else if($(e.currentTarget).hasClass('banner-clickholder')){if((customClickTracking.globalTrackingCounter<Number(customClickTracking.globalTrackingLimit)||customClickTracking.globalTrackingLimit==-1)){_.countAndTrack(!1,e.currentTarget.dataset.trackingurl)}}else{if((offers[e.currentTarget.dataset.id].trackingClickCount<Number(customClickTracking.offerTrackingLimit)||customClickTracking.offerTrackingLimit==-1)&&(customClickTracking.globalTrackingCounter<Number(customClickTracking.globalTrackingLimit)||customClickTracking.globalTrackingLimit==-1)){_.countAndTrack(e.currentTarget.dataset.id,e.currentTarget.dataset.trackingurl)}}})},countAndTrack:function(id,url){customClickTracking.globalTrackingCounter++;if(id){offers[id].trackingClickCount++}
var img=document.createElement("img");img.setAttribute("src",url)}}